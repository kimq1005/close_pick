name: Update Localization Strings

on:
  workflow_dispatch: # (ì¤‘ìš”) ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì‹¤í–‰í•˜ê² ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.

jobs:
  update-strings:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Install Lokalise CLI
        run: |
          curl -sfL https://raw.githubusercontent.com/lokalise/lokalise-cli-2-go/master/install.sh | sh
          sudo mv bin/lokalise2 /usr/local/bin/lokalise2

      - name: Download strings from Lokalise
        run: |
          lokalise2 file download \
            --token "${{ secrets.LOKALISE_API_TOKEN }}" \
            --project-id "${{ secrets.LOKALISE_PROJECT_ID }}" \
            --format xml \
            --unzip_to "app/src/main/res/" \
            --original_filenames=false \
            --bundle_structure "values-%LANG_ISO%/strings.xml" \
            --export_empty_as "base" \
            --include_tags "android"

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v6
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          commit-message: "chore: update localization strings from Lokalise"
          title: "ğŸŒ [Lokalise] ìµœì‹  ë²ˆì—­ ë°˜ì˜"
          body: "Lokaliseì—ì„œ ìµœì‹  ë²ˆì—­ íŒŒì¼ì„ ê°€ì ¸ì™€ ì—…ë°ì´íŠ¸í–ˆìŠµë‹ˆë‹¤. ë‚´ìš©ì„ í™•ì¸ í›„ ë¨¸ì§€í•´ì£¼ì„¸ìš”."
          branch: "lokalise-update"
